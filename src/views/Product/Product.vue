<template>
    <div class="container">
        <div class="titulo_lista">
            <p style="color:white ; font-size:18px;"> Lista Supermercado </p>
            <input type="text" v-model="search" placeholder="Ingresar Producto" @input="searchSubGroup('searching')">
            <!--  basket , bucket , person ,shop ,  -->
            <div>
                          <b-button  @click="searchSubGroup('Mercado')"
                                    class="botonFiltro"
                                    >
                                    <svg v-if="isButtonMercado" class="buttonMercadoSel" height="16pt" viewBox="0 0 512 512" width="16pt" xmlns="http://www.w3.org/2000/svg">
                                       <path d="M488,320H448V272a135.646,135.646,0,0,0-43.391-99.5c10.8-28.9,40.247-54.13,40.558-54.4A8,8,0,0,0,440,104c-23.13,0-43.238,4.541-60.1,13.524a142.337,142.337,0,0,1,10.562-15.341,184.9,184.9,0,0,1,22.7-24.076A8,8,0,0,0,408,64c-21.625,0-40.7,4.027-56.942,11.959-2.243-16.727-9.829-46.289-35.48-59.114a8,8,0,0,0-7.156,0C282.8,29.656,275.2,59.167,272.949,75.905,256.76,67.993,237.716,64,216,64a8,8,0,0,0-5.171,14.1,184.837,184.837,0,0,1,22.706,24.079,142.487,142.487,0,0,1,10.541,15.3C227.247,108.527,207.157,104,184,104a8,8,0,0,0-5.171,14.1c.315.267,29.76,25.5,40.562,54.4A135.646,135.646,0,0,0,176,272v.918c-8.827,1.677-20.508,5.5-26.746,10.183a23.539,23.539,0,0,1-2.789,1.79c2.107-19.267,5.837-38.922,12.191-48.453h0a8,8,0,1,0-13.312-8.874h0c-7.253,10.88-12.349,30.82-15.161,59.241a22.682,22.682,0,0,1-7.437-3.7C114.308,276.767,95.9,272,88.088,272c-20.916,0-39.788,8.528-53.139,24.013-15.217,17.65-21.717,42.736-17.834,68.825l5,33.577a177.583,177.583,0,0,0,20.514,60.658c13.061,23.4,35.725,36.958,59.7,36.957a64.634,64.634,0,0,0,17.45-2.416q.273-.076.538-.172l13.382-4.787a6.774,6.774,0,0,1,4.61,0l13.381,4.787c.177.064.357.121.538.172a64.646,64.646,0,0,0,17.451,2.416c17.534,0,34.364-7.261,47.253-20.313A199.9,199.9,0,0,0,304,496c49.8,0,97.916-18.855,135.5-53.091C475.405,410.194,496,368.312,496,328A8,8,0,0,0,488,320ZM278.225,279.9l33.88-32.9,33.948,32.957L312.188,312.8Zm18.4,40.1h-45.74a79.537,79.537,0,0,0-4.13-9.541l19.983-19.406Zm60.911-28.894L387.3,320h-59.56Zm-33.951-55.258,33.851-32.874,33.976,33-33.87,32.843Zm5.6-82.612a119.134,119.134,0,0,1,41.788,14.289l-13.537,13.146Zm16.768,38.587L312.1,224.7l-33.835-32.847,33.859-32.881ZM266.783,180.7l-13.64-13.242A119.1,119.1,0,0,1,295.108,153.2Zm0,22.3L300.62,235.85l-33.893,32.914-33.876-32.81Zm-11.541,76.915L237.775,296.88c-.241-.289-.478-.582-.724-.867a68.407,68.407,0,0,0-42.16-23.195l26.476-25.712Zm-5.356,118.5,5-33.577A96.693,96.693,0,0,0,254.92,336H446.578c-4.613,26.417-20.233,52.881-43.795,73.749C374.932,434.416,339.85,448,304,448a146.623,146.623,0,0,1-62.955-14.49A180.97,180.97,0,0,0,249.887,398.415ZM418.457,320,432,306.884V320ZM432,284.611l-29.126,28.207-33.843-32.855L402.9,247.121,432,275.383Zm-1.784-33.265L414.39,235.978l8.963-8.692A118.908,118.908,0,0,1,430.216,251.346Zm-14.237-39.2-13.073,12.677-33.984-33,15.722-15.268A120.912,120.912,0,0,1,415.979,212.149Zm2.981-90.616c-9.188,10.128-20.267,24.372-27.277,40.326a136.15,136.15,0,0,0-22.812-13.381c.1-1.246.252-2.492.448-3.738C382.207,132.4,398.843,124.627,418.96,121.533Zm-32.009-40c-12.99,14.321-29.755,36.867-33.466,60.941a134.954,134.954,0,0,0-28.978-5.9c-.938-2.913-2.139-6.209-3.664-9.75C330.666,108.008,349.8,87.269,386.951,81.538ZM312,33.207c19.825,12.915,23.276,42.533,23.875,51.9a97.241,97.241,0,0,0-23.887,25.235,98.949,98.949,0,0,0-12.629-15.592,97.243,97.243,0,0,0-11.232-9.665C288.729,75.695,292.19,46.112,312,33.207ZM237.06,81.55c44.324,6.88,62.782,35.164,70.312,54.537a135.295,135.295,0,0,0-36.857,6.392q-.375-2.436-.924-4.847l.282-.261c-.146-.158-.3-.31-.444-.466C264.231,114.961,249.04,94.76,237.06,81.55Zm-32.024,39.979c20.14,3.091,36.762,10.874,49.648,23.227.194,1.24.347,2.482.445,3.722a136.15,136.15,0,0,0-22.812,13.381C225.306,145.9,214.225,131.657,205.036,121.529Zm34.424,54.947L255.3,191.853l-33.946,32.965-13.24-12.824A120.9,120.9,0,0,1,239.46,176.476Zm-38.74,50.632,9.149,8.862-16.133,15.666A118.986,118.986,0,0,1,200.72,227.108ZM215.4,451.275C205.259,469.45,187.833,480,169.534,480a48.131,48.131,0,0,1-12.734-1.724L143.7,473.59a22.893,22.893,0,0,0-15.39,0L115.2,478.279c-22.6,6.191-46.118-4.634-58.6-27a161.624,161.624,0,0,1-18.659-55.216l-5-33.576c-3.2-21.482,1.952-41.9,14.127-56.022A53.249,53.249,0,0,1,88.088,288c5.082,0,19.94,4.059,25.053,7.9a38.271,38.271,0,0,0,15.75,7.013c-.394,6.368-.614,11.965-.737,16.251-6.914-1.552-10.4-4.729-10.589-4.907l.088.087a8,8,0,1,0-11.306,11.321C107.42,326.733,117.244,336,136,336c18.772,0,28.6-9.285,29.657-10.343a8,8,0,1,0-11.314-11.314c-.042.042-3.459,3.148-10.2,4.739.139-4.833.392-10.492.793-16.568a38.372,38.372,0,0,0,13.922-6.617c5.113-3.838,19.971-7.9,25.053-7.9a53.249,53.249,0,0,1,41.021,18.461c12.175,14.121,17.324,34.54,14.127,56.022l-5,33.576A161.639,161.639,0,0,1,215.4,451.275ZM428.72,431.081C394.093,462.627,349.8,480,304,480a183.62,183.62,0,0,1-76.872-17.161c.775-1.227,1.528-2.479,2.246-3.766q2.953-5.29,5.529-10.772A162.625,162.625,0,0,0,304,464c39.762,0,78.611-15.013,109.392-42.274,27.05-23.957,44.751-54.839,49.387-85.726h16.914C477.149,369.353,458.89,403.6,428.72,431.081Z"/><circle cx="408" cy="360" r="8"/><circle cx="368" cy="400" r="8"/><circle cx="328" cy="376" r="8"/><circle cx="280" cy="376" r="8"/><circle cx="304" cy="424" r="8"/>
                                    </svg>
                                    <svg v-else class="buttonMercado" height="16pt" viewBox="0 0 512 512" width="16pt" xmlns="http://www.w3.org/2000/svg">
                                       <path d="M488,320H448V272a135.646,135.646,0,0,0-43.391-99.5c10.8-28.9,40.247-54.13,40.558-54.4A8,8,0,0,0,440,104c-23.13,0-43.238,4.541-60.1,13.524a142.337,142.337,0,0,1,10.562-15.341,184.9,184.9,0,0,1,22.7-24.076A8,8,0,0,0,408,64c-21.625,0-40.7,4.027-56.942,11.959-2.243-16.727-9.829-46.289-35.48-59.114a8,8,0,0,0-7.156,0C282.8,29.656,275.2,59.167,272.949,75.905,256.76,67.993,237.716,64,216,64a8,8,0,0,0-5.171,14.1,184.837,184.837,0,0,1,22.706,24.079,142.487,142.487,0,0,1,10.541,15.3C227.247,108.527,207.157,104,184,104a8,8,0,0,0-5.171,14.1c.315.267,29.76,25.5,40.562,54.4A135.646,135.646,0,0,0,176,272v.918c-8.827,1.677-20.508,5.5-26.746,10.183a23.539,23.539,0,0,1-2.789,1.79c2.107-19.267,5.837-38.922,12.191-48.453h0a8,8,0,1,0-13.312-8.874h0c-7.253,10.88-12.349,30.82-15.161,59.241a22.682,22.682,0,0,1-7.437-3.7C114.308,276.767,95.9,272,88.088,272c-20.916,0-39.788,8.528-53.139,24.013-15.217,17.65-21.717,42.736-17.834,68.825l5,33.577a177.583,177.583,0,0,0,20.514,60.658c13.061,23.4,35.725,36.958,59.7,36.957a64.634,64.634,0,0,0,17.45-2.416q.273-.076.538-.172l13.382-4.787a6.774,6.774,0,0,1,4.61,0l13.381,4.787c.177.064.357.121.538.172a64.646,64.646,0,0,0,17.451,2.416c17.534,0,34.364-7.261,47.253-20.313A199.9,199.9,0,0,0,304,496c49.8,0,97.916-18.855,135.5-53.091C475.405,410.194,496,368.312,496,328A8,8,0,0,0,488,320ZM278.225,279.9l33.88-32.9,33.948,32.957L312.188,312.8Zm18.4,40.1h-45.74a79.537,79.537,0,0,0-4.13-9.541l19.983-19.406Zm60.911-28.894L387.3,320h-59.56Zm-33.951-55.258,33.851-32.874,33.976,33-33.87,32.843Zm5.6-82.612a119.134,119.134,0,0,1,41.788,14.289l-13.537,13.146Zm16.768,38.587L312.1,224.7l-33.835-32.847,33.859-32.881ZM266.783,180.7l-13.64-13.242A119.1,119.1,0,0,1,295.108,153.2Zm0,22.3L300.62,235.85l-33.893,32.914-33.876-32.81Zm-11.541,76.915L237.775,296.88c-.241-.289-.478-.582-.724-.867a68.407,68.407,0,0,0-42.16-23.195l26.476-25.712Zm-5.356,118.5,5-33.577A96.693,96.693,0,0,0,254.92,336H446.578c-4.613,26.417-20.233,52.881-43.795,73.749C374.932,434.416,339.85,448,304,448a146.623,146.623,0,0,1-62.955-14.49A180.97,180.97,0,0,0,249.887,398.415ZM418.457,320,432,306.884V320ZM432,284.611l-29.126,28.207-33.843-32.855L402.9,247.121,432,275.383Zm-1.784-33.265L414.39,235.978l8.963-8.692A118.908,118.908,0,0,1,430.216,251.346Zm-14.237-39.2-13.073,12.677-33.984-33,15.722-15.268A120.912,120.912,0,0,1,415.979,212.149Zm2.981-90.616c-9.188,10.128-20.267,24.372-27.277,40.326a136.15,136.15,0,0,0-22.812-13.381c.1-1.246.252-2.492.448-3.738C382.207,132.4,398.843,124.627,418.96,121.533Zm-32.009-40c-12.99,14.321-29.755,36.867-33.466,60.941a134.954,134.954,0,0,0-28.978-5.9c-.938-2.913-2.139-6.209-3.664-9.75C330.666,108.008,349.8,87.269,386.951,81.538ZM312,33.207c19.825,12.915,23.276,42.533,23.875,51.9a97.241,97.241,0,0,0-23.887,25.235,98.949,98.949,0,0,0-12.629-15.592,97.243,97.243,0,0,0-11.232-9.665C288.729,75.695,292.19,46.112,312,33.207ZM237.06,81.55c44.324,6.88,62.782,35.164,70.312,54.537a135.295,135.295,0,0,0-36.857,6.392q-.375-2.436-.924-4.847l.282-.261c-.146-.158-.3-.31-.444-.466C264.231,114.961,249.04,94.76,237.06,81.55Zm-32.024,39.979c20.14,3.091,36.762,10.874,49.648,23.227.194,1.24.347,2.482.445,3.722a136.15,136.15,0,0,0-22.812,13.381C225.306,145.9,214.225,131.657,205.036,121.529Zm34.424,54.947L255.3,191.853l-33.946,32.965-13.24-12.824A120.9,120.9,0,0,1,239.46,176.476Zm-38.74,50.632,9.149,8.862-16.133,15.666A118.986,118.986,0,0,1,200.72,227.108ZM215.4,451.275C205.259,469.45,187.833,480,169.534,480a48.131,48.131,0,0,1-12.734-1.724L143.7,473.59a22.893,22.893,0,0,0-15.39,0L115.2,478.279c-22.6,6.191-46.118-4.634-58.6-27a161.624,161.624,0,0,1-18.659-55.216l-5-33.576c-3.2-21.482,1.952-41.9,14.127-56.022A53.249,53.249,0,0,1,88.088,288c5.082,0,19.94,4.059,25.053,7.9a38.271,38.271,0,0,0,15.75,7.013c-.394,6.368-.614,11.965-.737,16.251-6.914-1.552-10.4-4.729-10.589-4.907l.088.087a8,8,0,1,0-11.306,11.321C107.42,326.733,117.244,336,136,336c18.772,0,28.6-9.285,29.657-10.343a8,8,0,1,0-11.314-11.314c-.042.042-3.459,3.148-10.2,4.739.139-4.833.392-10.492.793-16.568a38.372,38.372,0,0,0,13.922-6.617c5.113-3.838,19.971-7.9,25.053-7.9a53.249,53.249,0,0,1,41.021,18.461c12.175,14.121,17.324,34.54,14.127,56.022l-5,33.576A161.639,161.639,0,0,1,215.4,451.275ZM428.72,431.081C394.093,462.627,349.8,480,304,480a183.62,183.62,0,0,1-76.872-17.161c.775-1.227,1.528-2.479,2.246-3.766q2.953-5.29,5.529-10.772A162.625,162.625,0,0,0,304,464c39.762,0,78.611-15.013,109.392-42.274,27.05-23.957,44.751-54.839,49.387-85.726h16.914C477.149,369.353,458.89,403.6,428.72,431.081Z"/><circle cx="408" cy="360" r="8"/><circle cx="368" cy="400" r="8"/><circle cx="328" cy="376" r="8"/><circle cx="280" cy="376" r="8"/><circle cx="304" cy="424" r="8"/>
                                    </svg>
                          </b-button>
                          <b-button  @click="searchSubGroup('Abarrotes')"
                                    class="botonFiltro"
                                    >
                                    <svg v-if="isButtonAbarrotes" class="buttonMercadoSel" height="16pt" viewBox="0 0 512 512" width="16pt" xmlns="http://www.w3.org/2000/svg">
                                       <path d="M375.99,152a8.084,8.084,0,0,0,1-.063c13.492-1.686,39.008-12.3,39.008-40.382,0-8.62,3.742-14.9,11.441-19.207a39.492,39.492,0,0,1,13.364-4.39,8,8,0,0,0-1.579-15.921C425.658,73.357,400,83.313,400,111.556c0,8.7-3.791,15.148-11.59,19.723a40.666,40.666,0,0,1-13.4,4.783A8,8,0,0,0,375.99,152Z"/><path d="M16.051,208.507a7.9,7.9,0,0,0,.188,1.289l23.711,102.9L29.893,495.561A8,8,0,0,0,37.881,504H474.119a8,8,0,0,0,7.988-8.439L472.05,312.692l23.711-102.9a7.9,7.9,0,0,0,.188-1.289,23.847,23.847,0,0,0-12.919-22.859,25.73,25.73,0,0,0-3.03-1.339V80A71.986,71.986,0,0,0,342.144,50.948a72.011,72.011,0,0,0-72.076-2.466,71.986,71.986,0,0,0-122.422,24.87A49.286,49.286,0,0,0,136.048,72a48.415,48.415,0,0,0-15.718,2.53l15.388-56.425A8,8,0,0,0,128,8H88a8,8,0,0,0-7.718,5.9l-7.555,27.7-1.009-3.7A8,8,0,0,0,64,32H24a8,8,0,0,0-7.718,10.1l22.853,83.8c-5.532,16.49-9.125,38.005-5.878,57.987a25.4,25.4,0,0,0-4.287,1.759A23.847,23.847,0,0,0,16.051,208.507ZM352,80a56,56,0,0,1,112,0V183.992a24.867,24.867,0,0,0-7.6,4.1,8.553,8.553,0,0,1-11.279-.607L434.783,177.3a24.631,24.631,0,0,0-34.427,0l-9.116,8.983a8.564,8.564,0,0,1-11.968,0l-9.117-8.983A24.455,24.455,0,0,0,352,170.331ZM216,40a56.146,56.146,0,0,1,45.657,23.6,8,8,0,0,0,11,1.989,56.012,56.012,0,0,1,64.554,1.329A72,72,0,0,0,336,80v55.98a79.983,79.983,0,0,0-99.5,2.837,134.879,134.879,0,0,0-6.277-20.087c-5.795-14.276-14.159-22.592-24.86-24.716-9.727-1.931-18.768,1.872-25.133,5.889a55.643,55.643,0,0,0-17.839-20.095A56.081,56.081,0,0,1,216,40ZM336,157.694v19.365c-.088.084-.184.155-.271.241l-9.117,8.983a8.564,8.564,0,0,1-11.968,0l-9.117-8.983a24.63,24.63,0,0,0-34.426,0l-9.117,8.983a8.564,8.564,0,0,1-11.968,0L240.9,177.3a24.248,24.248,0,0,0-10.128-5.975A63.99,63.99,0,0,1,336,157.694ZM94.11,24h23.416L100.035,88.134A59.194,59.194,0,0,0,91.776,99.9c-1.157-.73-2.406-1.453-3.729-2.136L81.02,72Zm-4.663,94.307a8,8,0,0,0,13.424-3.521c.072-.267,7.548-26.786,33.177-26.786,25.287,0,32.784,25.724,33.081,26.786a8,8,0,0,0,13.424,3.521c2.671-2.714,12.021-10.125,19.691-8.6,5.084,1.009,9.508,6.069,13.15,15.04a122.492,122.492,0,0,1,7.568,28.672,79.627,79.627,0,0,0-10.228,19.436,24.218,24.218,0,0,0-6.261,4.444l-9.117,8.983a8.557,8.557,0,0,1-8.446,2.077c3.812-30.047-4.363-47.143-4.732-47.893a8,8,0,0,0-14.385,7.006c.057.121,4.535,9.914,4.1,27.8a24.634,24.634,0,0,0-32.044,2.031l-9.117,8.983a8.564,8.564,0,0,1-11.968,0l-9.116-8.983a24.319,24.319,0,0,0-12.811-6.61c.491-14.766,4.221-22.892,4.348-23.164a8,8,0,0,0-14.336-7.1c-.263.526-5.934,12.139-6.062,32.791a24.239,24.239,0,0,0-5.566,4.087L66.883,187.482a8.553,8.553,0,0,1-11.279.607,24.973,24.973,0,0,0-5.947-3.482c-4.4-20.5.523-44.027,6.949-59.859,3.634-8.951,8.046-14.008,13.115-15.033C77.332,108.173,86.555,115.41,89.447,118.307ZM34.474,48H57.89L70.311,93.547a26.993,26.993,0,0,0-3.67.467c-6.448,1.28-12.04,4.824-16.74,10.549Zm1.932,151.815a8.448,8.448,0,0,1,9.294.841,24.581,24.581,0,0,0,32.412-1.777L88.446,188.7a8.562,8.562,0,0,1,11.968,0l9.117,8.982a24.63,24.63,0,0,0,34.427,0l9.116-8.982a8.562,8.562,0,0,1,11.968,0l9.117,8.982a24.629,24.629,0,0,0,34.426,0L217.7,188.7a8.562,8.562,0,0,1,11.968,0l9.117,8.982a24.629,24.629,0,0,0,34.426,0l9.117-8.982a8.562,8.562,0,0,1,11.968,0l9.117,8.982a24.629,24.629,0,0,0,34.426,0l9.117-8.982a8.562,8.562,0,0,1,11.968,0l9.116,8.982a24.63,24.63,0,0,0,34.427,0l9.117-8.982a8.562,8.562,0,0,1,11.968,0l10.334,10.181a24.581,24.581,0,0,0,32.412,1.777,8.448,8.448,0,0,1,9.294-.841A8.048,8.048,0,0,1,480,206.94L456.2,310.2a8.035,8.035,0,0,0-.192,2.235L465.667,488H46.333l9.655-175.561A8.035,8.035,0,0,0,55.8,310.2L32,206.94A8.048,8.048,0,0,1,36.406,199.815Z"/><path d="M192,312H320a8,8,0,0,0,8-8V256a8,8,0,0,0-8-8H192a8,8,0,0,0-8,8v48A8,8,0,0,0,192,312Zm8-48H312v32H200Z"/>
                                    </svg>
                                    <svg v-else class="buttonMercado" height="16pt" viewBox="0 0 512 512" width="16pt" xmlns="http://www.w3.org/2000/svg">
                                       <path d="M375.99,152a8.084,8.084,0,0,0,1-.063c13.492-1.686,39.008-12.3,39.008-40.382,0-8.62,3.742-14.9,11.441-19.207a39.492,39.492,0,0,1,13.364-4.39,8,8,0,0,0-1.579-15.921C425.658,73.357,400,83.313,400,111.556c0,8.7-3.791,15.148-11.59,19.723a40.666,40.666,0,0,1-13.4,4.783A8,8,0,0,0,375.99,152Z"/><path d="M16.051,208.507a7.9,7.9,0,0,0,.188,1.289l23.711,102.9L29.893,495.561A8,8,0,0,0,37.881,504H474.119a8,8,0,0,0,7.988-8.439L472.05,312.692l23.711-102.9a7.9,7.9,0,0,0,.188-1.289,23.847,23.847,0,0,0-12.919-22.859,25.73,25.73,0,0,0-3.03-1.339V80A71.986,71.986,0,0,0,342.144,50.948a72.011,72.011,0,0,0-72.076-2.466,71.986,71.986,0,0,0-122.422,24.87A49.286,49.286,0,0,0,136.048,72a48.415,48.415,0,0,0-15.718,2.53l15.388-56.425A8,8,0,0,0,128,8H88a8,8,0,0,0-7.718,5.9l-7.555,27.7-1.009-3.7A8,8,0,0,0,64,32H24a8,8,0,0,0-7.718,10.1l22.853,83.8c-5.532,16.49-9.125,38.005-5.878,57.987a25.4,25.4,0,0,0-4.287,1.759A23.847,23.847,0,0,0,16.051,208.507ZM352,80a56,56,0,0,1,112,0V183.992a24.867,24.867,0,0,0-7.6,4.1,8.553,8.553,0,0,1-11.279-.607L434.783,177.3a24.631,24.631,0,0,0-34.427,0l-9.116,8.983a8.564,8.564,0,0,1-11.968,0l-9.117-8.983A24.455,24.455,0,0,0,352,170.331ZM216,40a56.146,56.146,0,0,1,45.657,23.6,8,8,0,0,0,11,1.989,56.012,56.012,0,0,1,64.554,1.329A72,72,0,0,0,336,80v55.98a79.983,79.983,0,0,0-99.5,2.837,134.879,134.879,0,0,0-6.277-20.087c-5.795-14.276-14.159-22.592-24.86-24.716-9.727-1.931-18.768,1.872-25.133,5.889a55.643,55.643,0,0,0-17.839-20.095A56.081,56.081,0,0,1,216,40ZM336,157.694v19.365c-.088.084-.184.155-.271.241l-9.117,8.983a8.564,8.564,0,0,1-11.968,0l-9.117-8.983a24.63,24.63,0,0,0-34.426,0l-9.117,8.983a8.564,8.564,0,0,1-11.968,0L240.9,177.3a24.248,24.248,0,0,0-10.128-5.975A63.99,63.99,0,0,1,336,157.694ZM94.11,24h23.416L100.035,88.134A59.194,59.194,0,0,0,91.776,99.9c-1.157-.73-2.406-1.453-3.729-2.136L81.02,72Zm-4.663,94.307a8,8,0,0,0,13.424-3.521c.072-.267,7.548-26.786,33.177-26.786,25.287,0,32.784,25.724,33.081,26.786a8,8,0,0,0,13.424,3.521c2.671-2.714,12.021-10.125,19.691-8.6,5.084,1.009,9.508,6.069,13.15,15.04a122.492,122.492,0,0,1,7.568,28.672,79.627,79.627,0,0,0-10.228,19.436,24.218,24.218,0,0,0-6.261,4.444l-9.117,8.983a8.557,8.557,0,0,1-8.446,2.077c3.812-30.047-4.363-47.143-4.732-47.893a8,8,0,0,0-14.385,7.006c.057.121,4.535,9.914,4.1,27.8a24.634,24.634,0,0,0-32.044,2.031l-9.117,8.983a8.564,8.564,0,0,1-11.968,0l-9.116-8.983a24.319,24.319,0,0,0-12.811-6.61c.491-14.766,4.221-22.892,4.348-23.164a8,8,0,0,0-14.336-7.1c-.263.526-5.934,12.139-6.062,32.791a24.239,24.239,0,0,0-5.566,4.087L66.883,187.482a8.553,8.553,0,0,1-11.279.607,24.973,24.973,0,0,0-5.947-3.482c-4.4-20.5.523-44.027,6.949-59.859,3.634-8.951,8.046-14.008,13.115-15.033C77.332,108.173,86.555,115.41,89.447,118.307ZM34.474,48H57.89L70.311,93.547a26.993,26.993,0,0,0-3.67.467c-6.448,1.28-12.04,4.824-16.74,10.549Zm1.932,151.815a8.448,8.448,0,0,1,9.294.841,24.581,24.581,0,0,0,32.412-1.777L88.446,188.7a8.562,8.562,0,0,1,11.968,0l9.117,8.982a24.63,24.63,0,0,0,34.427,0l9.116-8.982a8.562,8.562,0,0,1,11.968,0l9.117,8.982a24.629,24.629,0,0,0,34.426,0L217.7,188.7a8.562,8.562,0,0,1,11.968,0l9.117,8.982a24.629,24.629,0,0,0,34.426,0l9.117-8.982a8.562,8.562,0,0,1,11.968,0l9.117,8.982a24.629,24.629,0,0,0,34.426,0l9.117-8.982a8.562,8.562,0,0,1,11.968,0l9.116,8.982a24.63,24.63,0,0,0,34.427,0l9.117-8.982a8.562,8.562,0,0,1,11.968,0l10.334,10.181a24.581,24.581,0,0,0,32.412,1.777,8.448,8.448,0,0,1,9.294-.841A8.048,8.048,0,0,1,480,206.94L456.2,310.2a8.035,8.035,0,0,0-.192,2.235L465.667,488H46.333l9.655-175.561A8.035,8.035,0,0,0,55.8,310.2L32,206.94A8.048,8.048,0,0,1,36.406,199.815Z"/><path d="M192,312H320a8,8,0,0,0,8-8V256a8,8,0,0,0-8-8H192a8,8,0,0,0-8,8v48A8,8,0,0,0,192,312Zm8-48H312v32H200Z"/>
                                    </svg>
                          </b-button>
                          <b-button  @click="searchSubGroup('Super')"
                                    class="botonFiltro"
                                    >
                                    <svg v-if="isButtonSuper" class="buttonMercadoSel" height="16pt" viewBox="0 0 512 512" width="16pt" xmlns="http://www.w3.org/2000/svg">
                                       <path d="M488,192H336V176h16a8,8,0,0,0,8-8V72a8,8,0,0,0-8-8H160a8,8,0,0,0-8,8v96a8,8,0,0,0,8,8h16v16H24a8,8,0,0,0-8,8V440a8,8,0,0,0,8,8H488a8,8,0,0,0,8-8V200A8,8,0,0,0,488,192ZM168,80H344v80H168Zm24,96H320v16H192Zm288,32v16H32V208ZM448,432H296V288H448ZM232,320h16V432H232Zm32,0h16V432H264Zm16-16H232V288h48ZM216,432H64V288H216Zm264,0H464V280a8,8,0,0,0-8-8H56a8,8,0,0,0-8,8V432H32V240H480Z"/><path d="M320,96H192a8,8,0,0,0,0,16H320a8,8,0,0,0,0-16Z"/><path d="M280,128H232a8,8,0,0,0,0,16h48a8,8,0,0,0,0-16Z"/><path d="M88,416a7.976,7.976,0,0,0,5.657-2.343l96-96a8,8,0,1,0-11.314-11.314l-96,96A8,8,0,0,0,88,416Z"/><path d="M104,360a7.976,7.976,0,0,0,5.657-2.343l24-24a8,8,0,0,0-11.314-11.314l-24,24A8,8,0,0,0,104,360Z"/><path d="M162.343,362.343l-24,24a8,8,0,0,0,11.314,11.314l24-24a8,8,0,1,0-11.314-11.314Z"/><path d="M322.343,413.657a8,8,0,0,0,11.314,0l96-96a8,8,0,0,0-11.314-11.314l-96,96A8,8,0,0,0,322.343,413.657Z"/><path d="M344,360a7.974,7.974,0,0,0,5.657-2.343l24-24a8,8,0,0,0-11.314-11.314l-24,24A8,8,0,0,0,344,360Z"/><path d="M402.343,362.343l-24,24a8,8,0,0,0,11.314,11.314l24-24a8,8,0,0,0-11.314-11.314Z"/>
                                    </svg>
                                    <svg v-else class="buttonMercado" height="16pt" viewBox="0 0 512 512" width="16pt" xmlns="http://www.w3.org/2000/svg">
                                       <path d="M488,192H336V176h16a8,8,0,0,0,8-8V72a8,8,0,0,0-8-8H160a8,8,0,0,0-8,8v96a8,8,0,0,0,8,8h16v16H24a8,8,0,0,0-8,8V440a8,8,0,0,0,8,8H488a8,8,0,0,0,8-8V200A8,8,0,0,0,488,192ZM168,80H344v80H168Zm24,96H320v16H192Zm288,32v16H32V208ZM448,432H296V288H448ZM232,320h16V432H232Zm32,0h16V432H264Zm16-16H232V288h48ZM216,432H64V288H216Zm264,0H464V280a8,8,0,0,0-8-8H56a8,8,0,0,0-8,8V432H32V240H480Z"/><path d="M320,96H192a8,8,0,0,0,0,16H320a8,8,0,0,0,0-16Z"/><path d="M280,128H232a8,8,0,0,0,0,16h48a8,8,0,0,0,0-16Z"/><path d="M88,416a7.976,7.976,0,0,0,5.657-2.343l96-96a8,8,0,1,0-11.314-11.314l-96,96A8,8,0,0,0,88,416Z"/><path d="M104,360a7.976,7.976,0,0,0,5.657-2.343l24-24a8,8,0,0,0-11.314-11.314l-24,24A8,8,0,0,0,104,360Z"/><path d="M162.343,362.343l-24,24a8,8,0,0,0,11.314,11.314l24-24a8,8,0,1,0-11.314-11.314Z"/><path d="M322.343,413.657a8,8,0,0,0,11.314,0l96-96a8,8,0,0,0-11.314-11.314l-96,96A8,8,0,0,0,322.343,413.657Z"/><path d="M344,360a7.974,7.974,0,0,0,5.657-2.343l24-24a8,8,0,0,0-11.314-11.314l-24,24A8,8,0,0,0,344,360Z"/><path d="M402.343,362.343l-24,24a8,8,0,0,0,11.314,11.314l24-24a8,8,0,0,0-11.314-11.314Z"/>
                                    </svg>
                          </b-button>
                           <b-button  @click="searchSubGroup('Higiene')"
                                    class="botonFiltro"
                                    >
                                    <svg v-if="isButtonHigiene" class="buttonMercadoSel" height="16pt" viewBox="0 0 512 512" width="16pt" xmlns="http://www.w3.org/2000/svg">
                                       <path d="M456,160h-8v-8a24.039,24.039,0,0,0-16-22.624V104a8,8,0,0,0-8-8V64h32a24,24,0,0,0,0-48H376a24.028,24.028,0,0,0-24,24V56a8,8,0,0,0,8,8h16V96a8,8,0,0,0-8,8v25.376A24.039,24.039,0,0,0,352,152v8h-8a40.045,40.045,0,0,0-40,40v24H256V128h40a8,8,0,0,0,8-8V24a8,8,0,0,0-8-8H232a24.027,24.027,0,0,0-24,24V224H169.2l6.794-159.66A8,8,0,0,0,168,56H24a8,8,0,0,0-7.993,8.34L32,440.168V488a8,8,0,0,0,8,8H456a40.045,40.045,0,0,0,40-40V200A40.045,40.045,0,0,0,456,160Zm-40-48v16H384V112ZM368,40a8.009,8.009,0,0,1,8-8h80a8,8,0,0,1,0,16H368Zm24,24h16V96H392Zm-24,88a8.009,8.009,0,0,1,8-8h48a8.009,8.009,0,0,1,8,8v8H368Zm8,256a24.028,24.028,0,0,1-24,24H224a24.028,24.028,0,0,1-24-24V360a24.028,24.028,0,0,1,24-24H352a24.028,24.028,0,0,1,24,24Zm-72-88H224a40.045,40.045,0,0,0-40,40v48a39.788,39.788,0,0,0,8.022,24H168a8,8,0,0,0-8,8v16a39.788,39.788,0,0,0,8.022,24H144v-8a8,8,0,0,0-16,0v8H96V240h32v8a8,8,0,0,0,16,0v-8H304ZM288,48a8,8,0,0,0,0,16V80a8,8,0,0,0,0,16v16H270.624A23.889,23.889,0,0,0,272,104V40a23.889,23.889,0,0,0-1.376-8H288Zm-64-8a8.009,8.009,0,0,1,8-8h16a8.009,8.009,0,0,1,8,8v64a8.009,8.009,0,0,1-8,8H224Zm0,88h16v96H224ZM88,224a8,8,0,0,0-8,8V432H47.667L33.709,104H158.291l-5.107,120ZM159.652,72l-.681,16H33.029l-.681-16ZM48,448H80v32H48Zm152,32a24.027,24.027,0,0,1-24-24v-8H400v8a24.027,24.027,0,0,1-24,24Zm280-24a24.027,24.027,0,0,1-24,24H407.978A39.788,39.788,0,0,0,416,456V440a8,8,0,0,0-8-8H383.978A39.788,39.788,0,0,0,392,408V360a40.045,40.045,0,0,0-40-40H320V200a24.027,24.027,0,0,1,24-24H456a24.027,24.027,0,0,1,24,24Z"/><path d="M400,200c-31.4,0-56,17.57-56,40s24.6,40,56,40,56-17.57,56-40S431.4,200,400,200Zm0,64c-21.682,0-40-10.99-40-24s18.318-24,40-24,40,10.99,40,24S421.682,264,400,264Z"/><path d="M136,272a8,8,0,0,0-8,8v16a8,8,0,0,0,16,0V280A8,8,0,0,0,136,272Z"/><path d="M136,320a8,8,0,0,0-8,8v16a8,8,0,0,0,16,0V328A8,8,0,0,0,136,320Z"/><path d="M136,368a8,8,0,0,0-8,8v16a8,8,0,0,0,16,0V376A8,8,0,0,0,136,368Z"/><path d="M136,416a8,8,0,0,0-8,8v16a8,8,0,0,0,16,0V424A8,8,0,0,0,136,416Z"/>
                                    </svg>
                                    <svg v-else class="buttonMercado" height="16pt" viewBox="0 0 512 512" width="16pt" xmlns="http://www.w3.org/2000/svg">
                                       <path d="M456,160h-8v-8a24.039,24.039,0,0,0-16-22.624V104a8,8,0,0,0-8-8V64h32a24,24,0,0,0,0-48H376a24.028,24.028,0,0,0-24,24V56a8,8,0,0,0,8,8h16V96a8,8,0,0,0-8,8v25.376A24.039,24.039,0,0,0,352,152v8h-8a40.045,40.045,0,0,0-40,40v24H256V128h40a8,8,0,0,0,8-8V24a8,8,0,0,0-8-8H232a24.027,24.027,0,0,0-24,24V224H169.2l6.794-159.66A8,8,0,0,0,168,56H24a8,8,0,0,0-7.993,8.34L32,440.168V488a8,8,0,0,0,8,8H456a40.045,40.045,0,0,0,40-40V200A40.045,40.045,0,0,0,456,160Zm-40-48v16H384V112ZM368,40a8.009,8.009,0,0,1,8-8h80a8,8,0,0,1,0,16H368Zm24,24h16V96H392Zm-24,88a8.009,8.009,0,0,1,8-8h48a8.009,8.009,0,0,1,8,8v8H368Zm8,256a24.028,24.028,0,0,1-24,24H224a24.028,24.028,0,0,1-24-24V360a24.028,24.028,0,0,1,24-24H352a24.028,24.028,0,0,1,24,24Zm-72-88H224a40.045,40.045,0,0,0-40,40v48a39.788,39.788,0,0,0,8.022,24H168a8,8,0,0,0-8,8v16a39.788,39.788,0,0,0,8.022,24H144v-8a8,8,0,0,0-16,0v8H96V240h32v8a8,8,0,0,0,16,0v-8H304ZM288,48a8,8,0,0,0,0,16V80a8,8,0,0,0,0,16v16H270.624A23.889,23.889,0,0,0,272,104V40a23.889,23.889,0,0,0-1.376-8H288Zm-64-8a8.009,8.009,0,0,1,8-8h16a8.009,8.009,0,0,1,8,8v64a8.009,8.009,0,0,1-8,8H224Zm0,88h16v96H224ZM88,224a8,8,0,0,0-8,8V432H47.667L33.709,104H158.291l-5.107,120ZM159.652,72l-.681,16H33.029l-.681-16ZM48,448H80v32H48Zm152,32a24.027,24.027,0,0,1-24-24v-8H400v8a24.027,24.027,0,0,1-24,24Zm280-24a24.027,24.027,0,0,1-24,24H407.978A39.788,39.788,0,0,0,416,456V440a8,8,0,0,0-8-8H383.978A39.788,39.788,0,0,0,392,408V360a40.045,40.045,0,0,0-40-40H320V200a24.027,24.027,0,0,1,24-24H456a24.027,24.027,0,0,1,24,24Z"/><path d="M400,200c-31.4,0-56,17.57-56,40s24.6,40,56,40,56-17.57,56-40S431.4,200,400,200Zm0,64c-21.682,0-40-10.99-40-24s18.318-24,40-24,40,10.99,40,24S421.682,264,400,264Z"/><path d="M136,272a8,8,0,0,0-8,8v16a8,8,0,0,0,16,0V280A8,8,0,0,0,136,272Z"/><path d="M136,320a8,8,0,0,0-8,8v16a8,8,0,0,0,16,0V328A8,8,0,0,0,136,320Z"/><path d="M136,368a8,8,0,0,0-8,8v16a8,8,0,0,0,16,0V376A8,8,0,0,0,136,368Z"/><path d="M136,416a8,8,0,0,0-8,8v16a8,8,0,0,0,16,0V424A8,8,0,0,0,136,416Z"/>
                                    </svg>
                          </b-button>
                          </div>
            <b-form-select name="prioridades" v-model="selected" :options="options" @input="searchSubGroup('props')"></b-form-select>
            <b-form-select name="caracteristicas" v-model="selectedTienda" :options="optionsTiendas" @change="searchSubGroup('car')"></b-form-select>

        </div>
         <div class="productos">
                <div class="col producto" v-for="(producto,idx) in productFiltrado"
                    v-bind:key="idx"
                    >
                    <div class=" ">
                      <b-card no-body>
                        <b-button-group class="mr-1">
                          <!-- div   class="d-flex justify-content-between"   producto['.key'] -->
                          <b-button block v-b-toggle ="'collapse-'+ idx"
                          v-bind:class="{productoInicial :(!producto.seleccionado),
                          productoInicialSelec:producto.seleccionado}" >
                            <strong>{{ producto.name}} </strong> <strong class="price">${{producto.precios.last}}</strong>  <label class="presentacion">{{producto.presentacion}}</label> {{producto.tiendas.last}}
                          </b-button>
                          <b-button  @click="addDeseo(idx, $event)"
                                    class="productoDeseo"
                                    >
                                    <b-icon v-if="producto.deseado" icon="heart-fill"
                                    class="deseobutton"></b-icon>
                                    <b-icon v-else icon="heart"
                                    class="deseobutton1"></b-icon>
                                    <!-- heart-fill -->
                          </b-button>
                          <b-button  @click="seleccioinarProducto(idx, $event)"
                                    class="productoSeleccionado"
                                    >
                                    <b-icon v-if="producto.seleccionado" icon="cart-fill"
                                    class="seleccionadobutton"></b-icon>
                                    <b-icon v-else icon="cart-plus"
                                    class="seleccionadobutton1"></b-icon>
                          </b-button>
                          </b-button-group>
                      </b-card>
                    </div>
                    <b-collapse :id="'collapse-'+idx" class="mt-2">
                       <b-card>
                        <b-row class="flex-container">
                          <label>Marca:{{producto.marca}}: </label><label> {{producto.des}} </label>
                          <label v-if="producto.oferta">, ${{producto.precios.promo}} {{producto.oferta | conpromo}}</label>
                        </b-row>
                        <b-row class="flex-container">
                          <label class="flex-item">Nuevo <input v-miwidth="'100%'" type="text" v-model="producto.newPrecio"  :disabled="!producto.seleccionado" placeholder="$ nuevo precio"></label>
                          <label class="flex-item">Tienda<input v-miwidth="'100%'" type="text" v-model="producto.newTienda"  :disabled="!producto.seleccionado" placeholder="nueva tienda"></label>
                        </b-row>
                      </b-card>
                    </b-collapse>
                </div>
        </div>

        <div class="botones">
            <!--b-button :disabled="contador==0 && contadorDeseados==0" variant="success" @click="guardar">Guardar</-b-button -->
            <b-button variant="success" @click="guardar">Guardar</b-button>
            <b-button style="margin-left:10px;" :disabled="contadorDeseados==0" variant="info" @click="cancelar">Cancelar</b-button>
            <b-button style="margin-left:10px;" @click="limpiar" variant="info">Limpiar</b-button>

            <!--transition-- name="custom-classes-transition"
                enter-active-class="animated tada"
                leave-active-class="animated bounceOutRight">
                 <p v-if="contador>0">Animacion</p>
            </-transition-->

        </div>

        <div style="margin-top:20px;">
            <strong>Productos comprados{{contador}}</strong>
            <br/>
            <strong>Productos deseados {{contadorDeseados}}</strong>
        </div>
      </div>
</template>

<script >

import firebase from 'firebase'
import { mapGetters } from 'vuex'
const path = 'depa'
const pathId = 'abarrotes'
const pathSeleccionados = 'seleccionados'
// const db = firebase.firestore()
export default {
  name: 'Product',
  computed: {
    ...mapGetters(/* [
      'productos'
    ], */
      {
        user: 'authUser'
      }),
    /* chartData: function chart () { solo fue ejemplo
      const data = {
        productos: this.productos
      }
      return data
    } */
    productFiltrado () {
      console.log('productFiltrado:selected:' + this.selected)
      console.log('productFiltrado:lastSelect:' + this.lastselect)
      console.log('productFiltrado:Search:' + this.search)
      if (this.lastselect === 'props') {
        if (this.selected === 'a') {
          const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => a.deseado === true))
          // console.log(productitos)
          // this.limpiarFiltro(2)
          return productitos
          // return _.orderBy(productitos, 'categoria') // Use lodash’s
          // return Object.entries(this.productitos).sort(([_, b]) => b.categoria)
        } else if (this.selected === 'b') {
          // this.limpiarFiltro(2)
          const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => a.seleccionado === true))
          return productitos
        } else {
          return this.productos
        }
      } else if (this.lastselect === 'car') {
        if (this.selectedTienda === 'a') {
          const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => a.tiendas.last === 'Aurrera'))
          console.log(productitos)
          // this.limpiarFiltro(1)
          return productitos
        } else if (this.selectedTienda === 'b') {
          const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => a.tiendas.last === 'Puesto'))
          // this.limpiarFiltro(1)
          return productitos
        } else if (this.selectedTienda === 'c') {
          const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => a.tiendas.last === 'Soriana'))
          // this.limpiarFiltro(1)
          return productitos
        } else if (this.selectedTienda === 'd') {
          const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => a.tiendas.last === 'oxxo'))
          // this.limpiarFiltro(1)
          return productitos
        } else if (this.selectedTienda === 'e') {
          const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => a.tiendas.last === 'SuperNaturista'))
          return productitos
        } else if (this.selectedTienda === 'f') {
          const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => a.tiendas.last === 'Superama'))
          return productitos
        } else if (this.selectedTienda === 'g') {
          const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => a.tiendas.last === 'Waltmart'))
          return productitos
        } else if (this.selectedTienda === 'h') {
          const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => a.tiendas.last === 'Waldos'))
          return productitos
        } else if (this.selectedTienda === 'i') {
          const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => a.tiendas.last === 'Europea'))
          return productitos
        } else {
          return this.productos
        }
      } else if (this.lastselect === 'searching') {
        if (this.search !== '') {
          console.log('buscando:' + this.search)
          const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => a.name.toUpperCase().includes(this.search.toUpperCase())))
          // return this.productos.filter(product => product.name.toUpperCase().includes(this.search.toUpperCase()))
          return productitos
        } else {
          return this.productos
        }
      } else if (this.lastselect === 'Mercado') {
        if (this.isButtonMercado) {
          console.log('buscando: Por Mercado')
          const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => {
            return (a.categoria === 'Mercado' || a.categoria === 'verduras' || a.categoria === 'mercado' || a.tiendas.last === 'Puesto' || a.tiendas.last === 'Mercado')
          }
          ))
          // const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => a.name.toUpperCase().includes(this.search.toUpperCase())))
          // return this.productos.filter(product => product.name.toUpperCase().includes(this.search.toUpperCase()))
          return productitos
        } else {
          return this.productos
        }
      } else if (this.lastselect === 'Abarrotes') {
        if (this.isButtonAbarrotes) {
          console.log('buscando: Por Abarrotes')
          const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => {
            return (a.categoria === 'abarrotes' || a.categoria === 'Abarrotes' || a.categoria === 'abarrote')
          }
          ))
          return productitos
        } else {
          return this.productos
        }
      } else if (this.lastselect === 'Super') {
        if (this.isButtonAbarrotes) {
          console.log('buscando: Por Super')
          const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => {
            return (a.categoria === 'abarrotes' || a.categoria === 'Abarrotes' || a.categoria === 'abarrote')
          }
          ))
          return productitos
        } else {
          return this.productos
        }
      } else if (this.lastselect === 'Higiene') {
        if (this.isButtonAbarrotes) {
          console.log('buscando: Por Higiene')
          const productitos = Object.fromEntries(Object.entries(this.productos).filter(([_, a]) => {
            return (a.categoria === 'abarrotes' || a.categoria === 'Abarrotes' || a.categoria === 'abarrote')
          }
          ))
          return productitos
        } else {
          return this.productos
        }
      } else {
        return this.productos
        // return Object.entries(this.productos).sort(([_, a]) => a.name)
        // return Object.entries(this.productos).sort(
        //   function (a, b) {
        //     const nameA = a.categoria.toUpperCase() // ignore upper and lowercase
        //     const nameB = b.categoria.toUpperCase() // ignore upper and lowercase
        //     if (nameA < nameB) {
        //       return -1
        //     }
        //     if (nameA > nameB) {
        //       return 1
        //     }
        //     // names must be equal
        //     return 0
        //   }
        // )
      }
    }

  },
  beforeCreate () {
    // this.$store.commit('loading/SET_LOADING', true, { root: true })
    console.log('---beforeCreate--- this.authUser:' + this.authUser)
    console.log('---beforeCreate--- this.$store.state.authId:' + this.$store.state.authId)
    // Version usando Store
    // this.$store.dispatch('FETCH_PRODUCTS', this.$store.state.authId)

    // this.$store.commit('loading/SET_LOADING', false, { root: true })
  },
  data () {
    return {
      id: '',
      contador: 0,
      contadorDeseados: 0,
      productos: [],
      productosSelyDes: [],
      selected: null,
      options: [
        { value: null, text: 'Escoje para filtrar productos' },
        { value: 'a', text: 'Deseos' },
        { value: 'b', text: 'Seleccionados' }
      ],
      selectedTienda: null,
      optionsTiendas: [
        { value: null, text: 'Escoje para filtrar por Tienda' },
        { value: 'a', text: 'Aurrera' },
        { value: 'b', text: 'Mercado' },
        { value: 'c', text: 'Soriana' },
        { value: 'd', text: 'oxxo' },
        { value: 'e', text: 'SuperNaturista' },
        { value: 'f', text: 'Superama' },
        { value: 'g', text: 'Waltmart' },
        { value: 'h', text: 'Waldos' },
        { value: 'i', text: 'Europea' }
      ],
      lastselect: '',
      isButtonMercado: false,
      isButtonAbarrotes: false,
      isButtonSuper: false,
      isButtonHigiene: false,
      search: ''
    }
  },
  mounted () {
    this.$store.commit('loading/SET_LOADING', true, { root: true })
    console.log('mounted:: this.id:' + this.id)
    console.log('mounted:: this.authUser:' + this.authUser)
    console.log('mounted:: this.$store.state.authId:' + this.$store.state.authId)
    this.getInitial(this.$store.state.authId)
    this.$store.commit('loading/SET_LOADING', false, { root: true })
  },
  updated () {
    // console.log('updated :: this.$store.state.authId:')
    // this.$store.commit('loading/SET_LOADING', false, { root: true })
  },
  methods: { /** Agrega el poducto al carrito */
    seleccioinarProducto: function (id, event) {
      // event.target.id y id)
      const producto = this.productos[id] // id es key
      producto.seleccionado = !producto.seleccionado
      if (this.productosSelyDes[id]) {
        this.productosSelyDes[id].seleccionado = producto.seleccionado
      } else {
        this.productosSelyDes[id] = {
          seleccionado: producto.seleccionado
        }
      }
      this.contador = this.getProductosSeleccionados244().length
      // falta agregar suma de precios de cantidad y articulos
    }, /** Agrega el producto a la lista de DESEOS */
    addDeseo: function (id, event) {
      const producto = this.productos[id] // id es key
      producto.deseado = !producto.deseado
      if (this.productosSelyDes[id]) {
        this.productosSelyDes[id].deseado = producto.deseado
      } else {
        this.productosSelyDes[id] = {
          deseado: producto.deseado
        }
      }
      this.contadorDeseados = this.getProductosDeseadosSeleccionados().length
      this.$notify({
        group: 'foo',
        type: 'success',
        title: 'Me Gusta',
        text: ' Adoro el producto ' + producto.name
      })
    },
    preparePriceToSave: function (id) {
      // const producto = this.productos.find((a) => a.id === id)
      const producto = this.productos[id]
      const ttt = new Date()
      const yyyy = ttt.getFullYear()
      const mm = ((ttt.getMonth() < 10) ? ('0' + ttt.getMonth()) : ttt.getMonth())
      const dd = ttt.getDay() < 10 ? ('0' + ttt.getDay()) : ttt.getDay()
      const date = yyyy + '' + mm + '' + dd
      producto.precios[date] = producto.newPrecio
      producto.precios.last = producto.newPrecio
    }, /** Prepara las fechas que se van a guardar para la tienda */
    prepareMarcaToSave: function (id) {
      // const producto = this.productos.find((a) => a.id === id)
      const producto = this.productos[id]
      const ttt = new Date()
      const yyyy = ttt.getFullYear()
      const mm = ((ttt.getMonth() < 10) ? ('0' + ttt.getMonth()) : ttt.getMonth())
      const dd = ttt.getDate() < 10 ? ('0' + ttt.getDate()) : ttt.getDate()
      const date = yyyy + '' + mm + '' + dd
      producto.precios[date] = producto.newPrecio
      producto.precios.last = producto.newPrecio
      /* producto.precios.push({
        price: producto.newPrecio,
        date: date
      }) */
    }, /** Prepara las fechas que se van a guardar para ... */
    prepareToSave: function () {
      const ttt = new Date()
      const yyyy = ttt.getFullYear()
      const mm = ((ttt.getMonth() < 10) ? ('0' + (ttt.getMonth() + 1)) : ttt.getMonth())
      const dd = ttt.getDate() < 10 ? ('0' + ttt.getDate()) : ttt.getDate()
      const date = yyyy + '' + mm + '' + dd

      // Se agregan los Nuevos Precios a last  productos
      // this.getProductosSeleccionados().forEach(function (producto) {
      Object.values(this.getProductosSeleccionados()).forEach(function (producto) {
        producto.precios[date] = producto.newPrecio !== '' ? producto.newPrecio : producto.precios.last
        producto.precios.last = producto.newPrecio !== '' ? producto.newPrecio : producto.precios.last
        // producto.newPrecio = ''
        producto.tiendas[date] = producto.newTienda !== '' ? producto.newTienda : producto.tiendas.last
        producto.tiendas.last = producto.newTienda !== '' ? producto.newTienda : producto.tiendas.last

        producto.deseado = false
        producto.seleccionado = false
        producto.newPrecio = ''
        producto.newTienda = ''
        // producto.
      })
    },
    prepareToSaveProductosSelyDes: function () {
      Object.entries(this.productosSelyDes).forEach((prod) => {
        if (prod[1].seleccionado === true) {
          prod[1].seleccionado = false
          prod[1].deseado = false
        }
        // return prod
      })
      // Object.entries(this.productosSelyDes)
      // for (const indice in this.productosSelyDes) {
      // }
    },
    guardar: function () {
      console.log('GUARDAR ya preparados los datos: [-' + this.$store.state.authId + '-]')
      this.prepareToSave()
      // this.$store.dispatch('SAVE_PRODUCTS', this.$store.state.authId, this.productosSelyDes)

      /* firebase
        .database()
        .ref(pathSeleccionados)
        .child(this.$store.state.authId)
        .transaction(
          (valoresDB) => this.validarCompra(valoresDB),
          (error, committed, snapshot) =>
            this.validarRespuesta(error, committed, snapshot)
        ) */
      this.contador = 0
      this.prepareToSaveProductosSelyDes()
      firebase.database().ref(pathSeleccionados).child(this.$store.state.authId).set(this.productosSelyDes)
      // console.log('authID : ' + firebase.auth().currentUser.uid)
      this.actualizarElementos()
      this.$notify({
        group: 'foo',
        type: 'success',
        title: 'Guardar',
        text: 'Actualizcion de los datos correctamente'
      })
    },
    actualizarElementos: function () {
      // firebase.database().ref('/salas/1').set(this.productos);
      // firebase.database().ref(path).child(pathId).set(this.productos,function(error){
      /**  if(error){
                    console.log("No logro hacer la inserccion");
                }else{
                    console.log("logro hacer la inserccion");
                }
                */
      // this.validarRespuesta(error)  ya que de esta manera hay error,
      // se hace con arro function
      // }).then(response => console.log("Actualizacion finalizada["+response+"]") )
      firebase.database().ref(path).child(pathId).set(this.productos)
      // .set(this.productos, error=> this.validarRespuesta(error))
    },
    validarRespuesta: function (error, committed, shapshot) {
      if (error) {
        this.$notify({
          group: 'foo',
          type: 'error',
          title: 'Error',
          text: 'No es posible completar la operacion'
        })
      }
      if (committed) {
        this.$notify({
          group: 'foo',
          type: 'success',
          title: 'Exito',
          text: 'La operacion se realizo correntamente'
        })
      }
      // console.log(shapshot)
    }, /** Carga la informacion inicial con FireBase */
    getInitial: function (id) {
      console.log('getInitial[' + id + ']')
      // this.$store.commit('loading/SET_LOADING', true, { root: true })
      /* firebase.database().ref(path).child(pathId).on('value', (snapshot) => {
        this.cargarElementos(snapshot.val())
        // this.$store.commit('loading/SET_LOADING', false, { root: true })
        // this.isLoading = false
      }) */
      if (!id) {
        console.log('Aun no logeado')
      }
      const instance = firebase.database().ref('depa/abarrotes')
      const instanceSeleccionados = firebase.database().ref('seleccionados') // .child(idd)
      /* if (firebase.auth().currentUser.uid) { */
      // if (state.authId) {
      if (id) {
        console.log('Se traen los seleccionados por usuario')
        instanceSeleccionados.child(id)
      }
      instance.once('value', (snapshot) => {
        // console.log(snapshot.val())
        const productos = snapshot.val()
        Object.keys(productos).forEach((productoId) => {
          const producto = productos[productoId]
          // console.log('obtenemos los productosID:' + producto['.key'])
          if (id) {
            instanceSeleccionados.once('child_added', querySnapshot => {
              querySnapshot.forEach((snap) => {
                if (snap.key === productoId) {
                  // console.log('valor:' + snap.key + ' == ' + productoId)
                  if (snap.val().seleccionado) {
                    producto.seleccionado = true
                  } else {
                    producto.seleccionado = false
                  }
                  // console.log('snap.val().deseado: ' + snap.val().deseado + ' == ' + productoId)
                  if (snap.val().deseado) {
                    producto.deseado = true
                  } else {
                    producto.deseado = false
                  }
                }
              })
            })
          } else {
            producto.seleccionado = false
            producto.deseado = false
          }
          this.cargarElementos(productos)
        })
        instanceSeleccionados.once('child_added', querySnapshot => {
          const Seleccionados = querySnapshot.val()
          this.cargarSeleccionados(Seleccionados)
        })
        console.log('init: prductSELEC [' + Object.entries(this.productosSelyDes).length + ']')
        this.contadorDeseados = Object.entries(this.productosSelyDes).length
        this.contador = this.getProductosSeleccionados244().length
        // commit('loading/SET_LOADING', false, { root: true })
        // this.$store.commit('loading/SET_LOADING', false, { root: true })
      })

      // ejecuta el cambio cuando hay un cambio en la BD
      // .once('value', snapshot => this.cargarElementos( snapshot.val() ))    //commit('loading/SET_LOADING', true, { root: true })
    }, /** Carga la informacion inicial */

    /* Carga los productos de un cliente  */
    cargarElementos: function (data) {
      this.productos = data
    },
    cargarSeleccionados: function (data) {
      this.productosSelyDes = data
    }, /** Prepara las fechas que se van a guardar para el pecio */
    cancelar: function () {
      /* this.getProductosSeleccionados().forEach(function (producto) {
        producto.user_id = null

      })
      this.actualizarElementos() */
      this.contador = 0
      this.contadorDeseados = 0
    }, /** obtiene los productos agregados a comprar */
    getProductosSeleccionados: function (id) {
      // productosSelyDes
      return Object.values(this.productos).filter((a) => a.seleccionado)
    },
    getProductosSeleccionados244: function () {
      // return this.productos.filter((a) => a.seleccionado)
      return Object.values(this.productos).filter((a) => a.seleccionado)
    },
    getProductosDeseadosSeleccionados: function () {
      return Object.values(this.productos).filter((a) => a.deseado)
    },
    getProductosSeleccionados2: function () {
      // return this.productos.filter((a) => a.seleccionado)
      console.log(' getProductosSeleccionados2  ' + this.productos.length)
      // console.log(this.productos)
      var parsedobj = JSON.parse(JSON.stringify(this.productos))
      console.log(parsedobj)
      // console.log(' getProductosSeleccionados2  ' + parsedobj.length)
      // return parsedobj.filter((a) => a.seleccionado)
      var productosel = []
      Object.keys(parsedobj).forEach((productoId) => {
      // return parsedobj.forEach((productoId) => {
        const producto = this.productos[productoId]
        // console.log(producto)
        // console.log(' foreach seleccionado:' + producto.seleccionado)

        // producto.adquirido = false
        // producto.user_id = null

        if (producto.seleccionado) {
          console.log(' foreach: ' + producto.seleccionado)

          productosel.push(producto)
          // var productosel['.key'] = productoId
          // var productosel2
          // productosel2.seleccionado = producto.seleccionado
          // productosel2.faltante = producto.faltante
          //  pr oductosel2.push(productosel)
          // this.productosSelyDes.push(producto)
        }
        console.log('this.productosSelyDes')
        console.log(productosel)
        return productosel
        // return this.productosSelyDes
      })
    }, /** obtiene los productos agregados a deseos */

    getAllProductos: function () {
      return this.productos
    },
    limpiar: function () {
      Object.keys(this.productos).forEach((productoId) => {
        const producto = this.productos[productoId]
        producto.seleccionado = false
        producto.deseado = false
        // producto.user_id = null
      })
      this.contador = 0
      this.contadorDeseados = 0
    },
    limpiarFiltro: function (tipo) {
      // if (tipo === 1) this.selected = null
      // if (tipo === 2) this.selectedTienda = null
      // console.log('DESEO')
    },
    searchSubGroup: function (event) {
      console.log(event)
      this.lastselect = event
      // Mercado, Abarrotes, Super, Personal
      if (this.lastselect === 'Mercado') {
        if (this.isButtonMercado) {
          this.isButtonMercado = false
          this.isButtonAbarrotes = false
          this.isButtonSuper = false
          this.isButtonHigiene = false
        } else {
          this.isButtonMercado = true
          this.isButtonAbarrotes = false
          this.isButtonSuper = false
          this.isButtonHigiene = false
        }
      }
      if (this.lastselect === 'Abarrotes') {
        if (this.isButtonAbarrotes) {
          this.isButtonMercado = false
          this.isButtonAbarrotes = false
          this.isButtonSuper = false
          this.isButtonHigiene = false
        } else {
          this.isButtonMercado = false
          this.isButtonAbarrotes = true
          this.isButtonSuper = false
          this.isButtonHigiene = false
        }
      }
      if (this.lastselect === 'Super') {
        if (this.isButtonSuper) {
          this.isButtonMercado = false
          this.isButtonAbarrotes = false
          this.isButtonSuper = false
          this.isButtonHigiene = false
        } else {
          this.isButtonMercado = false
          this.isButtonAbarrotes = false
          this.isButtonSuper = true
          this.isButtonHigiene = false
        }
      }
      if (this.lastselect === 'Higiene') {
        if (this.isButtonSuper) {
          this.isButtonMercado = false
          this.isButtonAbarrotes = false
          this.isButtonSuper = false
          this.isButtonHigiene = false
        } else {
          this.isButtonMercado = false
          this.isButtonAbarrotes = false
          this.isButtonSuper = false
          this.isButtonHigiene = true
        }
      }
    }
  },
  watch: {
    user: {
      handler (cart, oldCart) {
        this.getInitial(this.$store.state.authId)
      }, // sera todos sus elementos
      deep: true
    }
  },
  filters: {
    uppercase: function (value) {
      if (!value) return ''
      return value.toString().toUpperCase()
    },
    conpromo: function (value) {
      if (value) {
        return 'Con promocion'
      } else {
        return 'Sin promocion'
      }
    }
  },

  directives: {
    miwidth: {
      inserted: function (el, binding) {
        el.style.width = binding.value
      }
    }
  }
}
</script>

<style lang="css" scoped>
/*  */
.container {
  padding-right: 5px;
  padding-left: 5px;
  @media only screen and (min-width: 790px) {
    padding-right: 15px;
    padding-left: 15px;
  }
}
.titulo_lista {
  background-color: #126899;
}
.productos {
  margin-top: 20px;
}
/* si se usa */
.producto {
  color: rgb(20, 19, 19);
  margin: 3px;
  font-weight: bold;
  margin-left: 0px;
  margin-right: 0px;
  padding-left: 0px;
  padding-right: 0px;
  @media only screen and (min-width: 790px) {
    margin-left: 20px;
    margin-right: 20px;
    padding-left: 20px;
    padding-right: 20px;
  }
}
.pointer {
  cursor: pointer;
}
.productoInicial {
  background-color: #3c90c0;
}
.productoInicialSelec {
  border-color: #0fd451;
  background-color: #99e1b1;
}
.productoInicial:hover {
  border-color: #8dc4e4;
  background-color: #89a4d8;
}
.productoInicial:focus, .productoInicial:active, .productoInicial:visited, btn-default:active:focus {
  border-color: #8dc4e4;
  background-color: #89a4d8;
}

/*  DESEOS */
.productoDeseo {
  border-color: white;
  background-color: white;
}
.productoDeseo:hover, .productoDeseo:focus, productoDeseo:active, .productoDeseo:visited {
  border-color: white;
  background-color: white;

/*  box-shadow: none; */
}
.deseobutton {
  color: #b22b73;
  background-color:white;
  border-color: none;
}
.deseobutton1 {
  color: red;
  background-color: white;
}
.deseobutton:hover, .deseobutton:focus, .deseobutton:active ,.deseobutton:visited {
  background-color:white;
  border-color: white;
}
.deseobutton1:hover, .deseobutton1:focus, .deseobutton1:active ,.deseobutton1:visited {
  background-color:white;
  border-color: white;
}
.deseobutton:disabled, .deseobutton::selection {
  /*border-color: #1eb14f;*/
  background-color: #eea15a;
}

      /* SELECCIONADOS */
.productoSeleccionado {
  border-color: white;
  background-color: white;
}
.productoSeleccionado:hover, .productoSeleccionado:focus, .productoSeleccionado:active, .productoSeleccionado:visited  {
  border-color: #c8dc92;
  background-color: white;
  outline: none;
  box-shadow: none;
}
.seleccionadobutton {
  color: #afee5d;
  background-color:white;
  border-color: none;
}
.seleccionadobutton1 {
  color: #afee5d;
    background-color:white;
  border-color: none;
}
.seleccionadobutton:hover, .seleccionadobutton:focus, .seleccionadobutton:active, .seleccionadobutton:visited {
  /*border-color: #1eb14f;*/
  background-color: #aaee52;
}
.seleccionadobutton:disabled, .seleccionadobutton::selection {
  background-color: #d3f0ad;
}

.fadet-enter-active,
.fadet-leave-active {
  transition: opacity 2s;
}
.fadet-enter,
.fadet-leave-to {
  opacity: 0;
}
.flex-container{
  margin: auto;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: flex-start;
}
.flex-item{
  display: flex;
  justify-content: center;
  align-items: center;
}
.flex-item:nth-child(odd){
  font-size: 12pt;
  @media only screen and (min-width: 790px) {
      font-size: 14pt;
  }
}

/** Botones personalizados */
.boton_personalizado{
    text-decoration: none;
    /*padding: 10px;*/
    /*font-weight: 600;*/
    font-size: 12px;
    /*color: #ffffff;*/
    width: 60px;
    height: 60px;
    /*background-color: #1883ba;*/
    background-color: gray;
    border-radius: 6px;
    border: 1px solid  gray;
    @media only screen and (min-width: 790px) {
      font-size: 14pt;
  }
}
.price {
  color:#073e5e;
}
.presentacion{
  color:#135a83;
  font-style: italic;
}

.buttonMercado{
  fill: rgb(245, 127, 59);
}
.buttonMercado:hover{
    fill: rgb(245, 127, 59);
/* background: #89a4d8; */
}
.buttonMercadoSel{
  fill: #b22b73;
}

/* botonFiltro */

/*  botonFiltro */
.botonFiltro {
  border-color: white;
  background-color: white;
}
.botonFiltro:hover, .botonFiltro:focus, botonFiltro:active, .botonFiltro:visited {
  border-color: rgb(245, 39, 39);
  background-color: rgb(252, 161, 161);
}
</style>
